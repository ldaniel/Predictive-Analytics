<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Conclusion</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FGV MBA</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-hand-holding-usd"></span>
     
    Business Case
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_about_the_data.html">About the Data</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Initial Analysis</li>
    <li>
      <a href="02_data_preparation.html">Data Preparation</a>
    </li>
    <li>
      <a href="03_exploration_report.html">Data Exploration</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-file-invoice"></span>
     
    Model's Reports
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Analytical Methods</li>
    <li>
      <a href="04_logistic_regression_report.html">Logistic Regression Report</a>
    </li>
    <li>
      <a href="05_decision_tree_report.html">Decision Tree Report</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Ensembe Methods</li>
    <li>
      <a href="06_boosting_report.html">Boosting Report</a>
    </li>
    <li>
      <a href="07_random_forest_report.html">Random Forest Report</a>
    </li>
  </ul>
</li>
<li>
  <a href="08_conclusion.html">
    <span class="fa fa-file-invoice-dollar"></span>
     
    Final Report
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Conclusion</h1>
<h4 class="date">August, 2019</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#objective"><span class="toc-section-number">1</span> Objective</a></li>
<li><a href="#model-evaluation"><span class="toc-section-number">2</span> Model Evaluation</a><ul>
<li><a href="#getting-the-predicted-score"><span class="toc-section-number">2.1</span> Getting the predicted score</a></li>
<li><a href="#getting-performance-measures-for-each-model."><span class="toc-section-number">2.2</span> Getting Performance Measures for each model.</a></li>
<li><a href="#evaluating-performance-of-each-model"><span class="toc-section-number">2.3</span> Evaluating performance of each model</a><ul>
<li><a href="#score-boxplots"><span class="toc-section-number">2.3.1</span> Score Boxplots</a></li>
<li><a href="#density-plots"><span class="toc-section-number">2.3.2</span> Density Plots</a></li>
<li><a href="#ks-plots"><span class="toc-section-number">2.3.3</span> KS Plots</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<div id="objective" class="section level1">
<h1><span class="header-section-number">1</span> Objective</h1>
<p>The goal of this session is to compare the performance of all the models created during this paper.</p>
</div>
<div id="model-evaluation" class="section level1">
<h1><span class="header-section-number">2</span> Model Evaluation</h1>
<div id="getting-the-predicted-score" class="section level2">
<h2><span class="header-section-number">2.1</span> Getting the predicted score</h2>
<p>Here we consolidate the predicted score and the actual value of each observation in the test datasets.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co">## making preditions for each model and consilidating in a single data frame</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">prob.full =<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb1-4" title="4">prob.train =<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb1-5" title="5">prob.test =<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">prob.full<span class="op">$</span>logistic.actual         &lt;-<span class="st"> </span>loan_dataset_logistic<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-8" title="8">prob.full<span class="op">$</span>logistic.predicted      &lt;-<span class="st"> </span><span class="kw">predict</span>(logistic.step, <span class="dt">type =</span> <span class="st">&quot;response&quot;</span>, <span class="dt">newdata =</span> loan_dataset_logistic)</a>
<a class="sourceLine" id="cb1-9" title="9">prob.full<span class="op">$</span>decision.tree.actual    &lt;-<span class="st"> </span>loan_dataset_DT<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-10" title="10">prob.full<span class="op">$</span>decision.tree.predicted &lt;-<span class="st"> </span><span class="kw">predict</span>(tree.prune, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>, <span class="dt">newdata =</span> loan_dataset_DT)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-11" title="11">prob.full<span class="op">$</span>boosting.actual         &lt;-<span class="st"> </span>loan_dataset_boost<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-12" title="12">prob.full<span class="op">$</span>boosting.predicted      &lt;-<span class="st"> </span><span class="kw">predict.boosting</span>(boost, loan_dataset_boost)<span class="op">$</span>prob[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-13" title="13">prob.full<span class="op">$</span>random.forest.actual    &lt;-<span class="st"> </span>loan_dataset_rf<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-14" title="14">prob.full<span class="op">$</span>random.forest.predicted &lt;-<span class="st"> </span><span class="kw">predict</span>(rf.full, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>, <span class="dt">newdata =</span> loan_dataset_rf)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16">prob.train<span class="op">$</span>logistic.actual         &lt;-<span class="st"> </span>data.train_logistic<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-17" title="17">prob.train<span class="op">$</span>logistic.predicted      &lt;-<span class="st"> </span><span class="kw">predict</span>(logistic.step, <span class="dt">type =</span> <span class="st">&quot;response&quot;</span>, <span class="dt">newdata =</span> data.train_logistic)</a>
<a class="sourceLine" id="cb1-18" title="18">prob.train<span class="op">$</span>decision.tree.actual    &lt;-<span class="st"> </span>data.train_DT<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-19" title="19">prob.train<span class="op">$</span>decision.tree.predicted &lt;-<span class="st"> </span><span class="kw">predict</span>(tree.prune, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>, <span class="dt">newdata =</span> data.train_DT)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-20" title="20">prob.train<span class="op">$</span>boosting.actual         &lt;-<span class="st"> </span>data.train_boost<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-21" title="21">prob.train<span class="op">$</span>boosting.predicted      &lt;-<span class="st"> </span><span class="kw">predict.boosting</span>(boost, data.train_boost)<span class="op">$</span>prob[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-22" title="22">prob.train<span class="op">$</span>random.forest.actual    &lt;-<span class="st"> </span>data.train_rf<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-23" title="23">prob.train<span class="op">$</span>random.forest.predicted &lt;-<span class="st"> </span><span class="kw">predict</span>(rf.full, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>, <span class="dt">newdata =</span> data.train_rf)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-24" title="24"></a>
<a class="sourceLine" id="cb1-25" title="25">prob.test<span class="op">$</span>logistic.actual         &lt;-<span class="st"> </span>data.test_logistic<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-26" title="26">prob.test<span class="op">$</span>logistic.predicted      &lt;-<span class="st"> </span><span class="kw">predict</span>(logistic.step, <span class="dt">type =</span> <span class="st">&quot;response&quot;</span>, <span class="dt">newdata =</span> data.test_logistic)</a>
<a class="sourceLine" id="cb1-27" title="27">prob.test<span class="op">$</span>decision.tree.actual    &lt;-<span class="st"> </span>data.test_DT<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-28" title="28">prob.test<span class="op">$</span>decision.tree.predicted &lt;-<span class="st"> </span><span class="kw">predict</span>(tree.prune, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>, <span class="dt">newdata =</span> data.test_DT)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-29" title="29">prob.test<span class="op">$</span>boosting.actual         &lt;-<span class="st"> </span>data.test_boost<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-30" title="30">prob.test<span class="op">$</span>boosting.predicted      &lt;-<span class="st"> </span><span class="kw">predict.boosting</span>(boost, data.test_boost)<span class="op">$</span>prob[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-31" title="31">prob.test<span class="op">$</span>random.forest.actual    &lt;-<span class="st"> </span>data.test_rf<span class="op">$</span>y_loan_defaulter</a>
<a class="sourceLine" id="cb1-32" title="32">prob.test<span class="op">$</span>random.forest.predicted &lt;-<span class="st"> </span><span class="kw">predict</span>(rf.full, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>, <span class="dt">newdata =</span> data.test_rf)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb1-33" title="33"></a>
<a class="sourceLine" id="cb1-34" title="34">prob.full   &lt;-<span class="st"> </span>prob.full <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>()</a>
<a class="sourceLine" id="cb1-35" title="35">prob.train  &lt;-<span class="st"> </span>prob.train <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>()</a>
<a class="sourceLine" id="cb1-36" title="36">prob.test   &lt;-<span class="st"> </span>prob.test <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>()</a></code></pre></div>
</div>
<div id="getting-performance-measures-for-each-model." class="section level2">
<h2><span class="header-section-number">2.2</span> Getting Performance Measures for each model.</h2>
<p>To calculate the performance measures, derived from the confusion matrix, of each model we need to find the score cut off that best split our test dataset into Defaulters and Non Defaulters.</p>
<p>In this excercise we decide to not prioritize the accuracy on predicting Defaulters and Non Defaultes, therefore we are looking for the score cut off that best predict each class equaly.</p>
<p>We will use a custom function developed in this paper to calculate the best cut off for each model:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co">## making preditions for each model and consilidating in a single data frame</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co"># calculateModelMetrics -------------------------------------------------------</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co"># The objective of this function is to calculate main metrics of model performance according to a cutoff value.</span></a>
<a class="sourceLine" id="cb2-4" title="4">calculateModelMetrics &lt;-<span class="st"> </span><span class="cf">function</span>(cutData, realData, predData){</a>
<a class="sourceLine" id="cb2-5" title="5">  cuttedData &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">ifelse</span>(predData<span class="op">&gt;=</span>cutData, <span class="dv">1</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb2-6" title="6">  </a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="kw">invisible</span>(<span class="kw">capture.output</span>(out &lt;-<span class="st"> </span><span class="kw">CrossTable</span>(realData, cuttedData, <span class="dt">prop.c =</span> F, <span class="dt">prop.t =</span> F, <span class="dt">prop.r =</span> T, <span class="dt">prop.chisq =</span> F)))</a>
<a class="sourceLine" id="cb2-8" title="8">  </a>
<a class="sourceLine" id="cb2-9" title="9">  out &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(out) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">merged=</span><span class="kw">paste0</span>(t.x, t.y)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">select</span>(merged, <span class="dt">val=</span>t.Freq)</a>
<a class="sourceLine" id="cb2-12" title="12">  </a>
<a class="sourceLine" id="cb2-13" title="13">  TN &lt;-<span class="st"> </span><span class="kw">filter</span>(out, merged <span class="op">==</span><span class="st"> &quot;00&quot;</span>)<span class="op">$</span>val[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb2-14" title="14">  FP &lt;-<span class="st"> </span><span class="kw">filter</span>(out, merged <span class="op">==</span><span class="st"> &quot;01&quot;</span>)<span class="op">$</span>val[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb2-15" title="15">  FN &lt;-<span class="st"> </span><span class="kw">filter</span>(out, merged <span class="op">==</span><span class="st"> &quot;10&quot;</span>)<span class="op">$</span>val[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb2-16" title="16">  TP &lt;-<span class="st"> </span><span class="kw">filter</span>(out, merged <span class="op">==</span><span class="st"> &quot;11&quot;</span>)<span class="op">$</span>val[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb2-17" title="17">  </a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="kw">return</span>(<span class="kw">data.frame</span>(<span class="dt">Cut =</span> cutData,</a>
<a class="sourceLine" id="cb2-19" title="19">                    <span class="dt">TN =</span> TN, </a>
<a class="sourceLine" id="cb2-20" title="20">                    <span class="dt">FP =</span> FP,</a>
<a class="sourceLine" id="cb2-21" title="21">                    <span class="dt">FN =</span> FN, </a>
<a class="sourceLine" id="cb2-22" title="22">                    <span class="dt">TP =</span> TP,</a>
<a class="sourceLine" id="cb2-23" title="23">                    <span class="dt">TPR =</span> TP<span class="op">/</span>(TP<span class="op">+</span>FN), <span class="dt">TNR=</span>TN<span class="op">/</span>(TN<span class="op">+</span>FP),</a>
<a class="sourceLine" id="cb2-24" title="24">                    <span class="dt">Error =</span> (FP<span class="op">+</span>FN)<span class="op">/</span>(TP<span class="op">+</span>TN<span class="op">+</span>FP<span class="op">+</span>FN),</a>
<a class="sourceLine" id="cb2-25" title="25">                    <span class="dt">Precision =</span> TP<span class="op">/</span>(TP<span class="op">+</span>FP),</a>
<a class="sourceLine" id="cb2-26" title="26">                    <span class="dt">F1 =</span> <span class="dv">2</span><span class="op">*</span>(TP<span class="op">/</span>(TP<span class="op">+</span>FN))<span class="op">*</span>(TP<span class="op">/</span>(TP<span class="op">+</span>FP))<span class="op">/</span>((TP<span class="op">/</span>(TP<span class="op">+</span>FP)) <span class="op">+</span><span class="st"> </span>(TP<span class="op">/</span>(TP<span class="op">+</span>FN)))))</a>
<a class="sourceLine" id="cb2-27" title="27">}</a>
<a class="sourceLine" id="cb2-28" title="28"></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="co"># modelMetrics ----------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb2-30" title="30"><span class="co"># The objective of this function is to calculate main metrics of model performance </span></a>
<a class="sourceLine" id="cb2-31" title="31"><span class="co"># for cutoffs from 0-1 based on given step.</span></a>
<a class="sourceLine" id="cb2-32" title="32">modelMetrics &lt;-<span class="st"> </span><span class="cf">function</span>(realData, predData, <span class="dt">stepping =</span> <span class="fl">0.01</span>, </a>
<a class="sourceLine" id="cb2-33" title="33">                         <span class="dt">plot_title =</span> <span class="st">&quot;TPR/TNR by cutoff over full dataset&quot;</span>){</a>
<a class="sourceLine" id="cb2-34" title="34">  probCuts &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">1</span>, <span class="dt">by =</span> stepping)</a>
<a class="sourceLine" id="cb2-35" title="35">  out &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(<span class="kw">lapply</span>(probCuts, calculateModelMetrics, <span class="dt">realData =</span> realData, <span class="dt">predData =</span> predData))</a>
<a class="sourceLine" id="cb2-36" title="36">  out &lt;-<span class="st"> </span>out[<span class="kw">complete.cases</span>(out),] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Difference =</span> <span class="kw">abs</span>(TPR<span class="op">-</span>TNR))</a>
<a class="sourceLine" id="cb2-37" title="37">  </a>
<a class="sourceLine" id="cb2-38" title="38">  best &lt;-<span class="st"> </span>out <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Difference) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>Difference)</a>
<a class="sourceLine" id="cb2-39" title="39">  </a>
<a class="sourceLine" id="cb2-40" title="40">  p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">x =</span> <span class="op">~</span>out<span class="op">$</span>Cut, <span class="dt">y =</span> <span class="op">~</span>out<span class="op">$</span>Difference, <span class="dt">name =</span> <span class="st">&#39;Abs. Diff.&#39;</span>, <span class="dt">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="dt">opacity =</span> <span class="fl">0.3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-41" title="41"><span class="st">    </span><span class="kw">add_trace</span>(<span class="dt">x =</span> <span class="op">~</span>out<span class="op">$</span>Cut, <span class="dt">y =</span> <span class="op">~</span>out<span class="op">$</span>TPR, <span class="dt">name =</span> <span class="st">&#39;TPR&#39;</span>, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines&#39;</span>, <span class="dt">opacity =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-42" title="42"><span class="st">    </span><span class="kw">add_trace</span>(<span class="dt">x =</span> <span class="op">~</span>out<span class="op">$</span>Cut, <span class="dt">y =</span> <span class="op">~</span>out<span class="op">$</span>TNR, <span class="dt">name =</span> <span class="st">&#39;TNR&#39;</span>, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines&#39;</span>, <span class="dt">opacity =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-43" title="43"><span class="st">    </span><span class="kw">add_text</span>(<span class="dt">x =</span> best<span class="op">$</span>Cut, <span class="dt">y =</span> best<span class="op">$</span>TPR, <span class="dt">text =</span> best<span class="op">$</span>Cut, <span class="dt">opacity =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-44" title="44"><span class="st">    </span><span class="kw">layout</span>(<span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&quot;Cutoff Value&quot;</span>),</a>
<a class="sourceLine" id="cb2-45" title="45">           <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&quot;True Ratio (%)&quot;</span>),</a>
<a class="sourceLine" id="cb2-46" title="46">           <span class="dt">title =</span> plot_title)</a>
<a class="sourceLine" id="cb2-47" title="47">  </a>
<a class="sourceLine" id="cb2-48" title="48">  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">TableResults =</span> out,</a>
<a class="sourceLine" id="cb2-49" title="49">              <span class="dt">BestCut =</span> best,</a>
<a class="sourceLine" id="cb2-50" title="50">              <span class="dt">Plot =</span> p))</a>
<a class="sourceLine" id="cb2-51" title="51">}</a></code></pre></div>
<p>With the returned object from these function we can plot the comparason between TPR (True Positive Rate) and TNR (True Negative Rate) to find the best cut off.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co">## getting measures -----------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3">metricsByCutoff.test_log    &lt;-<span class="st"> </span><span class="kw">modelMetrics</span>(prob.test<span class="op">$</span>logistic.actual, </a>
<a class="sourceLine" id="cb3-4" title="4">                                            prob.test<span class="op">$</span>logistic.predicted, </a>
<a class="sourceLine" id="cb3-5" title="5">                                            <span class="dt">plot_title =</span> <span class="st">&#39;Logistic Regression&#39;</span>)</a>
<a class="sourceLine" id="cb3-6" title="6">metricsByCutoff.test_DT     &lt;-<span class="st"> </span><span class="kw">modelMetrics</span>(prob.test<span class="op">$</span>decision.tree.actual, </a>
<a class="sourceLine" id="cb3-7" title="7">                                            prob.test<span class="op">$</span>decision.tree.predicted, </a>
<a class="sourceLine" id="cb3-8" title="8">                                            <span class="dt">plot_title =</span> <span class="st">&#39;Decision Tree&#39;</span>)</a>
<a class="sourceLine" id="cb3-9" title="9">metricsByCutoff.test_boost  &lt;-<span class="st"> </span><span class="kw">modelMetrics</span>(prob.test<span class="op">$</span>boosting.actual, </a>
<a class="sourceLine" id="cb3-10" title="10">                                            prob.test<span class="op">$</span>boosting.predicted, </a>
<a class="sourceLine" id="cb3-11" title="11">                                            <span class="dt">plot_title =</span> <span class="st">&#39;Boosting&#39;</span>)</a>
<a class="sourceLine" id="cb3-12" title="12">metricsByCutoff.test_rf     &lt;-<span class="st"> </span><span class="kw">modelMetrics</span>(prob.test<span class="op">$</span>random.forest.actual, </a>
<a class="sourceLine" id="cb3-13" title="13">                                            prob.test<span class="op">$</span>random.forest.predicted, </a>
<a class="sourceLine" id="cb3-14" title="14">                                            <span class="dt">plot_title =</span> <span class="st">&#39;Random Forest&#39;</span>)</a>
<a class="sourceLine" id="cb3-15" title="15"></a>
<a class="sourceLine" id="cb3-16" title="16">cutoffs &lt;-<span class="st"> </span>plotly<span class="op">::</span><span class="kw">subplot</span>(metricsByCutoff.test_log<span class="op">$</span>Plot,</a>
<a class="sourceLine" id="cb3-17" title="17">                   metricsByCutoff.test_DT<span class="op">$</span>Plot,</a>
<a class="sourceLine" id="cb3-18" title="18">                   metricsByCutoff.test_boost<span class="op">$</span>Plot,</a>
<a class="sourceLine" id="cb3-19" title="19">                   metricsByCutoff.test_rf<span class="op">$</span>Plot,</a>
<a class="sourceLine" id="cb3-20" title="20">                   <span class="dt">nrows =</span> <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">hide_legend</span>()</a>
<a class="sourceLine" id="cb3-21" title="21"></a>
<a class="sourceLine" id="cb3-22" title="22">cutoffs</a></code></pre></div>
<div id="htmlwidget-c953fb72430fec2de043" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c953fb72430fec2de043">{"x":{"data":[{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77],"y":[0.820335195530726,0.686256983240223,0.516871508379888,0.415418994413408,0.26927374301676,0.167821229050279,0.0319553072625699,0.0303910614525139,0.0918435754189943,0.130949720670391,0.147709497206704,0.215642458100559,0.277988826815642,0.311508379888268,0.357094972067039,0.36268156424581,0.413854748603352,0.419441340782123,0.465027932960894,0.521787709497207,0.527374301675978,0.567374301675978,0.57854748603352,0.61854748603352,0.629720670391061,0.635307262569832,0.640893854748603,0.640893854748603,0.640893854748603,0.646480446927374,0.646480446927374,0.646480446927374,0.692067039106145,0.772067039106145,0.772067039106145,0.772067039106145,0.772067039106145,0.772067039106145,0.772067039106145,0.783240223463687,0.823240223463687,0.863240223463687,0.903240223463687,0.903240223463687,0.903240223463687,0.903240223463687,0.908826815642458,0.908826815642458,0.908826815642458,0.908826815642458,0.914413407821229,0.914413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.954413407821229,0.96],"opacity":0.3,"name":"Abs. Diff.","type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77],"y":[0.96,0.96,0.88,0.84,0.8,0.76,0.68,0.64,0.64,0.64,0.64,0.6,0.56,0.56,0.52,0.52,0.48,0.48,0.44,0.4,0.4,0.36,0.36,0.32,0.32,0.32,0.32,0.32,0.32,0.32,0.32,0.32,0.28,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.16,0.12,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04],"opacity":1,"name":"TPR","type":"scatter","mode":"lines","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77],"y":[0.139664804469274,0.273743016759777,0.363128491620112,0.424581005586592,0.53072625698324,0.592178770949721,0.64804469273743,0.670391061452514,0.731843575418994,0.770949720670391,0.787709497206704,0.815642458100559,0.837988826815642,0.871508379888268,0.877094972067039,0.88268156424581,0.893854748603352,0.899441340782123,0.905027932960894,0.921787709497207,0.927374301675978,0.927374301675978,0.93854748603352,0.93854748603352,0.949720670391061,0.955307262569832,0.960893854748603,0.960893854748603,0.960893854748603,0.966480446927374,0.966480446927374,0.966480446927374,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.983240223463687,0.983240223463687,0.983240223463687,0.983240223463687,0.983240223463687,0.983240223463687,0.983240223463687,0.988826815642458,0.988826815642458,0.988826815642458,0.988826815642458,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,0.994413407821229,1],"opacity":1,"name":"TNR","type":"scatter","mode":"lines","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"line":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.08],"y":[0.64],"opacity":1,"name":"Abs. Diff.","type":"scatter","text":0.08,"mode":"text","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"line":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82],"y":[0.0449162011173184,0.0449162011173184,0.0449162011173184,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.135642458100559,0.373854748603352,0.373854748603352,0.373854748603352,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.390614525139665,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.57854748603352,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145,0.852067039106145],"opacity":0.3,"name":"Abs. Diff.","type":"bar","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82],"y":[0.76,0.76,0.76,0.68,0.68,0.68,0.68,0.68,0.68,0.68,0.68,0.68,0.68,0.68,0.68,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.52,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12],"opacity":1,"name":"TPR","type":"scatter","mode":"lines","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"line":{"color":"rgba(140,86,75,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82],"y":[0.715083798882682,0.715083798882682,0.715083798882682,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.815642458100559,0.893854748603352,0.893854748603352,0.893854748603352,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.910614525139665,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.93854748603352,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145,0.972067039106145],"opacity":1,"name":"TNR","type":"scatter","mode":"lines","marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"error_y":{"color":"rgba(227,119,194,1)"},"error_x":{"color":"rgba(227,119,194,1)"},"line":{"color":"rgba(227,119,194,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[0.02],"y":[0.76],"opacity":1,"name":"Abs. Diff.","type":"scatter","text":0.02,"mode":"text","marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"error_y":{"color":"rgba(127,127,127,1)"},"error_x":{"color":"rgba(127,127,127,1)"},"line":{"color":"rgba(127,127,127,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57],"y":[0.994413407821229,0.994413407821229,0.972067039106145,0.960893854748603,0.949720670391061,0.93854748603352,0.905027932960894,0.832402234636872,0.810055865921788,0.770949720670391,0.715083798882682,0.659217877094972,0.608938547486034,0.597765363128492,0.535418994413408,0.49072625698324,0.479553072625698,0.434860335195531,0.378994413407821,0.305474860335196,0.243128491620112,0.107262569832402,0.0230167597765364,0.0621229050279329,0.210055865921788,0.272402234636871,0.385921787709497,0.448268156424581,0.53854748603352,0.57854748603352,0.715307262569832,0.760893854748603,0.812067039106145,0.852067039106145,0.943240223463687,0.948826815642458,0.948826815642458,0.954413407821229,0.96],"opacity":0.3,"name":"Abs. Diff.","type":"bar","marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"error_y":{"color":"rgba(188,189,34,1)"},"error_x":{"color":"rgba(188,189,34,1)"},"xaxis":"x3","yaxis":"y3","frame":null},{"x":[0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57],"y":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.96,0.96,0.96,0.96,0.96,0.92,0.88,0.8,0.72,0.72,0.6,0.56,0.48,0.44,0.4,0.36,0.24,0.2,0.16,0.12,0.04,0.04,0.04,0.04,0.04],"opacity":1,"name":"TPR","type":"scatter","mode":"lines","marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"error_y":{"color":"rgba(23,190,207,1)"},"error_x":{"color":"rgba(23,190,207,1)"},"line":{"color":"rgba(23,190,207,1)"},"xaxis":"x3","yaxis":"y3","frame":null},{"x":[0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57],"y":[0.00558659217877095,0.00558659217877095,0.0279329608938547,0.0391061452513966,0.0502793296089385,0.0614525139664804,0.0949720670391061,0.167597765363128,0.189944134078212,0.229050279329609,0.284916201117318,0.340782122905028,0.391061452513966,0.402234636871508,0.424581005586592,0.46927374301676,0.480446927374302,0.525139664804469,0.581005586592179,0.614525139664804,0.636871508379888,0.692737430167598,0.743016759776536,0.782122905027933,0.810055865921788,0.832402234636871,0.865921787709497,0.888268156424581,0.93854748603352,0.93854748603352,0.955307262569832,0.960893854748603,0.972067039106145,0.972067039106145,0.983240223463687,0.988826815642458,0.988826815642458,0.994413407821229,1],"opacity":1,"name":"TNR","type":"scatter","mode":"lines","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x3","yaxis":"y3","frame":null},{"x":[0.41],"y":[0.72],"opacity":1,"name":"Abs. Diff.","type":"scatter","text":0.41,"mode":"text","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x3","yaxis":"y3","frame":null},{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89],"y":[0.592178770949721,0.463687150837989,0.396648044692737,0.346368715083799,0.284916201117318,0.251396648044693,0.229050279329609,0.189944134078212,0.184357541899441,0.162011173184358,0.110837988826816,0.0540782122905028,0.0429050279329609,0.0261452513966481,0.00938547486033525,0.00379888268156425,0.0362011173184358,0.0473743016759777,0.0985474860335196,0.0985474860335196,0.14413407821229,0.149720670391061,0.229720670391061,0.235307262569832,0.235307262569832,0.240893854748603,0.240893854748603,0.240893854748603,0.240893854748603,0.240893854748603,0.240893854748603,0.240893854748603,0.280893854748603,0.292067039106145,0.297653631284916,0.297653631284916,0.303240223463687,0.343240223463687,0.343240223463687,0.348826815642458,0.348826815642458,0.348826815642458,0.348826815642458,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.36,0.4,0.4,0.4,0.4,0.4,0.4,0.44,0.48,0.48,0.48,0.48,0.48,0.56,0.64,0.64,0.76,0.76,0.76,0.76,0.8,0.84,0.84,0.84,0.88,0.92,0.92,0.92,0.96,0.96,0.96,0.96,0.96],"opacity":0.3,"name":"Abs. Diff.","type":"bar","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x4","yaxis":"y4","frame":null},{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89],"y":[1,1,1,1,1,1,1,1,1,1,0.96,0.92,0.92,0.92,0.92,0.92,0.88,0.88,0.84,0.84,0.8,0.8,0.72,0.72,0.72,0.72,0.72,0.72,0.72,0.72,0.72,0.72,0.68,0.68,0.68,0.68,0.68,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.6,0.6,0.6,0.6,0.6,0.6,0.56,0.52,0.52,0.52,0.52,0.52,0.44,0.36,0.36,0.24,0.24,0.24,0.24,0.2,0.16,0.16,0.16,0.12,0.08,0.08,0.08,0.04,0.04,0.04,0.04,0.04],"opacity":1,"name":"TPR","type":"scatter","mode":"lines","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"line":{"color":"rgba(214,39,40,1)"},"xaxis":"x4","yaxis":"y4","frame":null},{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89],"y":[0.407821229050279,0.536312849162011,0.603351955307263,0.653631284916201,0.715083798882682,0.748603351955307,0.770949720670391,0.810055865921788,0.815642458100559,0.837988826815642,0.849162011173184,0.865921787709497,0.877094972067039,0.893854748603352,0.910614525139665,0.916201117318436,0.916201117318436,0.927374301675978,0.93854748603352,0.93854748603352,0.94413407821229,0.949720670391061,0.949720670391061,0.955307262569832,0.955307262569832,0.960893854748603,0.960893854748603,0.960893854748603,0.960893854748603,0.960893854748603,0.960893854748603,0.960893854748603,0.960893854748603,0.972067039106145,0.977653631284916,0.977653631284916,0.983240223463687,0.983240223463687,0.983240223463687,0.988826815642458,0.988826815642458,0.988826815642458,0.988826815642458,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"opacity":1,"name":"TNR","type":"scatter","mode":"lines","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"line":{"color":"rgba(148,103,189,1)"},"xaxis":"x4","yaxis":"y4","frame":null},{"x":[0.16],"y":[0.92],"opacity":1,"name":"Abs. Diff.","type":"scatter","text":0.16,"mode":"text","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"line":{"color":"rgba(140,86,75,1)"},"xaxis":"x4","yaxis":"y4","frame":null}],"layout":{"xaxis":{"domain":[0,0.48],"automargin":true,"anchor":"y"},"xaxis2":{"domain":[0.52,1],"automargin":true,"anchor":"y2"},"xaxis3":{"domain":[0,0.48],"automargin":true,"anchor":"y3"},"xaxis4":{"domain":[0.52,1],"automargin":true,"anchor":"y4"},"yaxis4":{"domain":[0,0.48],"automargin":true,"anchor":"x4"},"yaxis3":{"domain":[0,0.48],"automargin":true,"anchor":"x3"},"yaxis2":{"domain":[0.52,1],"automargin":true,"anchor":"x2"},"yaxis":{"domain":[0.52,1],"automargin":true,"anchor":"x"},"annotations":[],"shapes":[],"images":[],"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Random Forest","hovermode":"closest","showlegend":false},"attrs":{"a9462b5337":{"x":{},"y":{},"opacity":0.3,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"a9462b5337.1":{"x":{},"y":{},"opacity":1,"name":"TPR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a9462b5337.2":{"x":{},"y":{},"opacity":1,"name":"TNR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a9462b5337.3":{"x":0.08,"y":0.64,"opacity":1,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","text":0.08,"mode":"text","inherit":true},"a945b6e66d7":{"x":{},"y":{},"opacity":0.3,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"a945b6e66d7.1":{"x":{},"y":{},"opacity":1,"name":"TPR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a945b6e66d7.2":{"x":{},"y":{},"opacity":1,"name":"TNR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a945b6e66d7.3":{"x":0.02,"y":0.76,"opacity":1,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","text":0.02,"mode":"text","inherit":true},"a94768d7047":{"x":{},"y":{},"opacity":0.3,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"a94768d7047.1":{"x":{},"y":{},"opacity":1,"name":"TPR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a94768d7047.2":{"x":{},"y":{},"opacity":1,"name":"TNR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a94768d7047.3":{"x":0.41,"y":0.72,"opacity":1,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","text":0.41,"mode":"text","inherit":true},"a9414fc7f36":{"x":{},"y":{},"opacity":0.3,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"a9414fc7f36.1":{"x":{},"y":{},"opacity":1,"name":"TPR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a9414fc7f36.2":{"x":{},"y":{},"opacity":1,"name":"TNR","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","inherit":true},"a9414fc7f36.3":{"x":0.16,"y":0.92,"opacity":1,"name":"Abs. Diff.","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","text":0.16,"mode":"text","inherit":true}},"source":"A","config":{"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,".hideLegend":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>With the optimized cut off for each model we calculate the full set of model metrics.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># logistic regression</span></a>
<a class="sourceLine" id="cb4-2" title="2">measures.logistic.train &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.train<span class="op">$</span>logistic.actual, </a>
<a class="sourceLine" id="cb4-3" title="3">                                    prob.train<span class="op">$</span>logistic.predicted, </a>
<a class="sourceLine" id="cb4-4" title="4">                                    <span class="dt">threshold =</span> metricsByCutoff.test_log<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-5" title="5">measures.logistic.test &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.test<span class="op">$</span>logistic.actual, </a>
<a class="sourceLine" id="cb4-6" title="6">                                   prob.test<span class="op">$</span>logistic.predicted, </a>
<a class="sourceLine" id="cb4-7" title="7">                                   <span class="dt">threshold =</span> metricsByCutoff.test_log<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co"># decision tree</span></a>
<a class="sourceLine" id="cb4-10" title="10">measures.decision.tree.train &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.train<span class="op">$</span>decision.tree.actual, </a>
<a class="sourceLine" id="cb4-11" title="11">                                         prob.train<span class="op">$</span>decision.tree.predicted, </a>
<a class="sourceLine" id="cb4-12" title="12">                                         <span class="dt">threshold =</span> metricsByCutoff.test_DT<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-13" title="13">measures.decision.tree.test &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.test<span class="op">$</span>decision.tree.actual, </a>
<a class="sourceLine" id="cb4-14" title="14">                                        prob.test<span class="op">$</span>decision.tree.predicted, </a>
<a class="sourceLine" id="cb4-15" title="15">                                        <span class="dt">threshold =</span> metricsByCutoff.test_DT<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-16" title="16"></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co"># boosting</span></a>
<a class="sourceLine" id="cb4-18" title="18">measures.boosting.train &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.train<span class="op">$</span>boosting.actual, </a>
<a class="sourceLine" id="cb4-19" title="19">                                    prob.train<span class="op">$</span>boosting.predicted, </a>
<a class="sourceLine" id="cb4-20" title="20">                                    <span class="dt">threshold =</span> metricsByCutoff.test_boost<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-21" title="21">measures.boosting.test  &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.test<span class="op">$</span>boosting.actual, </a>
<a class="sourceLine" id="cb4-22" title="22">                                    prob.test<span class="op">$</span>boosting.predicted, </a>
<a class="sourceLine" id="cb4-23" title="23">                                    <span class="dt">threshold =</span> metricsByCutoff.test_boost<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-24" title="24"></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co"># random forest</span></a>
<a class="sourceLine" id="cb4-26" title="26">measures.random.forest.train &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.train<span class="op">$</span>random.forest.actual, </a>
<a class="sourceLine" id="cb4-27" title="27">                                         prob.train<span class="op">$</span>random.forest.predicted, </a>
<a class="sourceLine" id="cb4-28" title="28">                                         <span class="dt">threshold =</span> metricsByCutoff.test_rf<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-29" title="29">measures.random.forest.test  &lt;-<span class="st"> </span><span class="kw">HMeasure</span>(prob.test<span class="op">$</span>random.forest.actual, </a>
<a class="sourceLine" id="cb4-30" title="30">                                         prob.test<span class="op">$</span>random.forest.predicted, </a>
<a class="sourceLine" id="cb4-31" title="31">                                         <span class="dt">threshold =</span> metricsByCutoff.test_rf<span class="op">$</span>BestCut[<span class="st">&#39;Cut&#39;</span>])</a>
<a class="sourceLine" id="cb4-32" title="32"></a>
<a class="sourceLine" id="cb4-33" title="33"><span class="co"># join measures in a single data frame</span></a>
<a class="sourceLine" id="cb4-34" title="34">measures &lt;-<span class="st"> </span><span class="kw">t</span>(<span class="kw">bind_rows</span>(measures.logistic.train<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-35" title="35">                        measures.logistic.test<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-36" title="36">                        measures.decision.tree.train<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-37" title="37">                        measures.decision.tree.test<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-38" title="38">                        measures.boosting.train<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-39" title="39">                        measures.boosting.test<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-40" title="40">                        measures.random.forest.train<span class="op">$</span>metrics,</a>
<a class="sourceLine" id="cb4-41" title="41">                        measures.random.forest.test<span class="op">$</span>metrics</a>
<a class="sourceLine" id="cb4-42" title="42">                        )) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>(., <span class="dt">rownames =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb4-43" title="43"></a>
<a class="sourceLine" id="cb4-44" title="44"><span class="kw">colnames</span>(measures) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;logistic - train&#39;</span>, <span class="st">&#39;logistic - test&#39;</span>,</a>
<a class="sourceLine" id="cb4-45" title="45">                        <span class="st">&#39;decision.tree - train&#39;</span>, <span class="st">&#39;decision.tree - test&#39;</span>,</a>
<a class="sourceLine" id="cb4-46" title="46">                        <span class="st">&#39;boosting - train&#39;</span>, <span class="st">&#39;boosting - test&#39;</span>,</a>
<a class="sourceLine" id="cb4-47" title="47">                        <span class="st">&#39;random forest - train&#39;</span>, <span class="st">&#39;random forest - test&#39;</span>)</a>
<a class="sourceLine" id="cb4-48" title="48"></a>
<a class="sourceLine" id="cb4-49" title="49">measures<span class="op">$</span>metric =<span class="st"> </span><span class="kw">rownames</span>(measures)</a>
<a class="sourceLine" id="cb4-50" title="50"></a>
<a class="sourceLine" id="cb4-51" title="51">measures &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(measures, metric, <span class="kw">everything</span>())</a></code></pre></div>
<p>Below are the metrics on the train dataset:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">select</span>(measures, <span class="kw">contains</span>(<span class="st">&#39;train&#39;</span>)), <span class="dt">row.names =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">logistic - train</th>
<th align="right">decision.tree - train</th>
<th align="right">boosting - train</th>
<th align="right">random forest - train</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>H</td>
<td align="right">0.3612900</td>
<td align="right">0.5637664</td>
<td align="right">0.8026685</td>
<td align="right">0.8523849</td>
</tr>
<tr class="even">
<td>Gini</td>
<td align="right">0.6641411</td>
<td align="right">0.7917987</td>
<td align="right">0.9558250</td>
<td align="right">0.9311659</td>
</tr>
<tr class="odd">
<td>AUC</td>
<td align="right">0.8320705</td>
<td align="right">0.8958993</td>
<td align="right">0.9779125</td>
<td align="right">0.9655830</td>
</tr>
<tr class="even">
<td>AUCH</td>
<td align="right">0.8475456</td>
<td align="right">0.8958993</td>
<td align="right">0.9809432</td>
<td align="right">0.9741930</td>
</tr>
<tr class="odd">
<td>KS</td>
<td align="right">0.5492033</td>
<td align="right">0.6941268</td>
<td align="right">0.8788171</td>
<td align="right">0.8753272</td>
</tr>
<tr class="even">
<td>MER</td>
<td align="right">0.0920502</td>
<td align="right">0.0774059</td>
<td align="right">0.0502092</td>
<td align="right">0.0188285</td>
</tr>
<tr class="odd">
<td>MWL</td>
<td align="right">0.0859316</td>
<td align="right">0.0583061</td>
<td align="right">0.0231001</td>
<td align="right">0.0237653</td>
</tr>
<tr class="even">
<td>Spec.Sens95</td>
<td align="right">0.5339578</td>
<td align="right">0.2122365</td>
<td align="right">0.9180328</td>
<td align="right">0.7704918</td>
</tr>
<tr class="odd">
<td>Sens.Spec95</td>
<td align="right">0.3725490</td>
<td align="right">0.5801961</td>
<td align="right">0.8627451</td>
<td align="right">0.9019608</td>
</tr>
<tr class="even">
<td>ER</td>
<td align="right">0.3347280</td>
<td align="right">0.2510460</td>
<td align="right">0.1966527</td>
<td align="right">0.0857741</td>
</tr>
<tr class="odd">
<td>Sens</td>
<td align="right">0.8431373</td>
<td align="right">0.9019608</td>
<td align="right">1.0000000</td>
<td align="right">0.9019608</td>
</tr>
<tr class="even">
<td>Spec</td>
<td align="right">0.6440281</td>
<td align="right">0.7306792</td>
<td align="right">0.7798595</td>
<td align="right">0.9156909</td>
</tr>
<tr class="odd">
<td>Precision</td>
<td align="right">0.2205128</td>
<td align="right">0.2857143</td>
<td align="right">0.3517241</td>
<td align="right">0.5609756</td>
</tr>
<tr class="even">
<td>Recall</td>
<td align="right">0.8431373</td>
<td align="right">0.9019608</td>
<td align="right">1.0000000</td>
<td align="right">0.9019608</td>
</tr>
<tr class="odd">
<td>TPR</td>
<td align="right">0.8431373</td>
<td align="right">0.9019608</td>
<td align="right">1.0000000</td>
<td align="right">0.9019608</td>
</tr>
<tr class="even">
<td>FPR</td>
<td align="right">0.3559719</td>
<td align="right">0.2693208</td>
<td align="right">0.2201405</td>
<td align="right">0.0843091</td>
</tr>
<tr class="odd">
<td>F</td>
<td align="right">0.3495935</td>
<td align="right">0.4339623</td>
<td align="right">0.5204082</td>
<td align="right">0.6917293</td>
</tr>
<tr class="even">
<td>Youden</td>
<td align="right">0.4871654</td>
<td align="right">0.6326399</td>
<td align="right">0.7798595</td>
<td align="right">0.8176517</td>
</tr>
<tr class="odd">
<td>TP</td>
<td align="right">43.0000000</td>
<td align="right">46.0000000</td>
<td align="right">51.0000000</td>
<td align="right">46.0000000</td>
</tr>
<tr class="even">
<td>FP</td>
<td align="right">152.0000000</td>
<td align="right">115.0000000</td>
<td align="right">94.0000000</td>
<td align="right">36.0000000</td>
</tr>
<tr class="odd">
<td>TN</td>
<td align="right">275.0000000</td>
<td align="right">312.0000000</td>
<td align="right">333.0000000</td>
<td align="right">391.0000000</td>
</tr>
<tr class="even">
<td>FN</td>
<td align="right">8.0000000</td>
<td align="right">5.0000000</td>
<td align="right">0.0000000</td>
<td align="right">5.0000000</td>
</tr>
</tbody>
</table>
<p>Below are the metrics on the test dataset:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">select</span>(measures, <span class="kw">contains</span>(<span class="st">&#39;test&#39;</span>)), <span class="dt">row.names =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">logistic - test</th>
<th align="right">decision.tree - test</th>
<th align="right">boosting - test</th>
<th align="right">random forest - test</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>H</td>
<td align="right">0.3070793</td>
<td align="right">0.3261052</td>
<td align="right">0.3681577</td>
<td align="right">0.7667868</td>
</tr>
<tr class="even">
<td>Gini</td>
<td align="right">0.5195531</td>
<td align="right">0.5497207</td>
<td align="right">0.6594413</td>
<td align="right">0.9472626</td>
</tr>
<tr class="odd">
<td>AUC</td>
<td align="right">0.7597765</td>
<td align="right">0.7748603</td>
<td align="right">0.8297207</td>
<td align="right">0.9736313</td>
</tr>
<tr class="even">
<td>AUCH</td>
<td align="right">0.7915084</td>
<td align="right">0.7820112</td>
<td align="right">0.8528492</td>
<td align="right">0.9792179</td>
</tr>
<tr class="odd">
<td>KS</td>
<td align="right">0.4370950</td>
<td align="right">0.4956425</td>
<td align="right">0.5689385</td>
<td align="right">0.8435754</td>
</tr>
<tr class="even">
<td>MER</td>
<td align="right">0.1078431</td>
<td align="right">0.1225490</td>
<td align="right">0.1176471</td>
<td align="right">0.0441176</td>
</tr>
<tr class="odd">
<td>MWL</td>
<td align="right">0.1210592</td>
<td align="right">0.1084679</td>
<td align="right">0.0927047</td>
<td align="right">0.0336409</td>
</tr>
<tr class="even">
<td>Spec.Sens95</td>
<td align="right">0.3072626</td>
<td align="right">0.4189944</td>
<td align="right">0.6089385</td>
<td align="right">0.8659218</td>
</tr>
<tr class="odd">
<td>Sens.Spec95</td>
<td align="right">0.3200000</td>
<td align="right">0.2020000</td>
<td align="right">0.3200000</td>
<td align="right">0.7200000</td>
</tr>
<tr class="even">
<td>ER</td>
<td align="right">0.3333333</td>
<td align="right">0.2794118</td>
<td align="right">0.2598039</td>
<td align="right">0.0833333</td>
</tr>
<tr class="odd">
<td>Sens</td>
<td align="right">0.6400000</td>
<td align="right">0.7600000</td>
<td align="right">0.7200000</td>
<td align="right">0.9200000</td>
</tr>
<tr class="even">
<td>Spec</td>
<td align="right">0.6703911</td>
<td align="right">0.7150838</td>
<td align="right">0.7430168</td>
<td align="right">0.9162011</td>
</tr>
<tr class="odd">
<td>Precision</td>
<td align="right">0.2133333</td>
<td align="right">0.2714286</td>
<td align="right">0.2812500</td>
<td align="right">0.6052632</td>
</tr>
<tr class="even">
<td>Recall</td>
<td align="right">0.6400000</td>
<td align="right">0.7600000</td>
<td align="right">0.7200000</td>
<td align="right">0.9200000</td>
</tr>
<tr class="odd">
<td>TPR</td>
<td align="right">0.6400000</td>
<td align="right">0.7600000</td>
<td align="right">0.7200000</td>
<td align="right">0.9200000</td>
</tr>
<tr class="even">
<td>FPR</td>
<td align="right">0.3296089</td>
<td align="right">0.2849162</td>
<td align="right">0.2569832</td>
<td align="right">0.0837989</td>
</tr>
<tr class="odd">
<td>F</td>
<td align="right">0.3200000</td>
<td align="right">0.4000000</td>
<td align="right">0.4044944</td>
<td align="right">0.7301587</td>
</tr>
<tr class="even">
<td>Youden</td>
<td align="right">0.3103911</td>
<td align="right">0.4750838</td>
<td align="right">0.4630168</td>
<td align="right">0.8362011</td>
</tr>
<tr class="odd">
<td>TP</td>
<td align="right">16.0000000</td>
<td align="right">19.0000000</td>
<td align="right">18.0000000</td>
<td align="right">23.0000000</td>
</tr>
<tr class="even">
<td>FP</td>
<td align="right">59.0000000</td>
<td align="right">51.0000000</td>
<td align="right">46.0000000</td>
<td align="right">15.0000000</td>
</tr>
<tr class="odd">
<td>TN</td>
<td align="right">120.0000000</td>
<td align="right">128.0000000</td>
<td align="right">133.0000000</td>
<td align="right">164.0000000</td>
</tr>
<tr class="even">
<td>FN</td>
<td align="right">9.0000000</td>
<td align="right">6.0000000</td>
<td align="right">7.0000000</td>
<td align="right">2.0000000</td>
</tr>
</tbody>
</table>
</div>
<div id="evaluating-performance-of-each-model" class="section level2">
<h2><span class="header-section-number">2.3</span> Evaluating performance of each model</h2>
<p>In this session we look at some metrics of each model on the test dataset.</p>
<div id="score-boxplots" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Score Boxplots</h3>
<p>First we look at the score box plots to see how well the models are able to split Defaulters and Non Defaultes.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">boxplots &lt;-<span class="st"> </span><span class="kw">ggarrange</span>(<span class="kw">Score_Boxplot</span>(prob.test, </a>
<a class="sourceLine" id="cb7-2" title="2">                        prob.test<span class="op">$</span>logistic.predicted, </a>
<a class="sourceLine" id="cb7-3" title="3">                        prob.test<span class="op">$</span>logistic.actual,</a>
<a class="sourceLine" id="cb7-4" title="4">                        <span class="st">&#39;Logistic Regression&#39;</span>),</a>
<a class="sourceLine" id="cb7-5" title="5">          <span class="kw">Score_Boxplot</span>(prob.test, </a>
<a class="sourceLine" id="cb7-6" title="6">                        prob.test<span class="op">$</span>decision.tree.predicted, </a>
<a class="sourceLine" id="cb7-7" title="7">                        prob.test<span class="op">$</span>decision.tree.actual,</a>
<a class="sourceLine" id="cb7-8" title="8">                        <span class="st">&#39;Decision Tree&#39;</span>),</a>
<a class="sourceLine" id="cb7-9" title="9">          <span class="kw">Score_Boxplot</span>(prob.test, </a>
<a class="sourceLine" id="cb7-10" title="10">                        prob.test<span class="op">$</span>boosting.predicted, </a>
<a class="sourceLine" id="cb7-11" title="11">                        prob.test<span class="op">$</span>boosting.actual,</a>
<a class="sourceLine" id="cb7-12" title="12">                        <span class="st">&#39;Boosting&#39;</span>),</a>
<a class="sourceLine" id="cb7-13" title="13">          <span class="kw">Score_Boxplot</span>(prob.test, </a>
<a class="sourceLine" id="cb7-14" title="14">                        prob.test<span class="op">$</span>random.forest.predicted, </a>
<a class="sourceLine" id="cb7-15" title="15">                        prob.test<span class="op">$</span>random.forest.actual,</a>
<a class="sourceLine" id="cb7-16" title="16">                        <span class="st">&#39;Random Forest&#39;</span>))</a>
<a class="sourceLine" id="cb7-17" title="17"></a>
<a class="sourceLine" id="cb7-18" title="18">boxplots &lt;-<span class="st"> </span><span class="kw">annotate_figure</span>(boxplots, </a>
<a class="sourceLine" id="cb7-19" title="19">                            <span class="dt">top =</span> <span class="kw">text_grob</span>(<span class="st">&quot;Score Boxplots of All Models&quot;</span>, </a>
<a class="sourceLine" id="cb7-20" title="20">                                            <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>, </a>
<a class="sourceLine" id="cb7-21" title="21">                                            <span class="dt">size =</span> <span class="dv">14</span>))</a>
<a class="sourceLine" id="cb7-22" title="22"></a>
<a class="sourceLine" id="cb7-23" title="23">boxplots</a></code></pre></div>
<p><img src="08_conclusion_files/figure-html/boxplots_plots-1.png" width="100%" /></p>
</div>
<div id="density-plots" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Density Plots</h3>
<p>Another way to look at the score distribution of each model is ploting its density histograms.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">density_plots &lt;-<span class="st"> </span><span class="kw">ggarrange</span>(<span class="kw">Score_Histograms</span>(prob.test, </a>
<a class="sourceLine" id="cb8-2" title="2">                        prob.test<span class="op">$</span>logistic.predicted,</a>
<a class="sourceLine" id="cb8-3" title="3">                        prob.test<span class="op">$</span>logistic.actual,</a>
<a class="sourceLine" id="cb8-4" title="4">                        <span class="st">&#39;Logistic Regression&#39;</span>),</a>
<a class="sourceLine" id="cb8-5" title="5">          <span class="kw">Score_Histograms</span>(prob.test, </a>
<a class="sourceLine" id="cb8-6" title="6">                        prob.test<span class="op">$</span>decision.tree.predicted,</a>
<a class="sourceLine" id="cb8-7" title="7">                        prob.test<span class="op">$</span>decision.tree.actual,</a>
<a class="sourceLine" id="cb8-8" title="8">                        <span class="st">&#39;Decision Tree&#39;</span>),</a>
<a class="sourceLine" id="cb8-9" title="9">          <span class="kw">Score_Histograms</span>(prob.test, </a>
<a class="sourceLine" id="cb8-10" title="10">                        prob.test<span class="op">$</span>boosting.predicted,</a>
<a class="sourceLine" id="cb8-11" title="11">                        prob.test<span class="op">$</span>boosting.actual,</a>
<a class="sourceLine" id="cb8-12" title="12">                        <span class="st">&#39;Boosting&#39;</span>),</a>
<a class="sourceLine" id="cb8-13" title="13">          <span class="kw">Score_Histograms</span>(prob.test, </a>
<a class="sourceLine" id="cb8-14" title="14">                        prob.test<span class="op">$</span>random.forest.predicted,</a>
<a class="sourceLine" id="cb8-15" title="15">                        prob.test<span class="op">$</span>random.forest.actual,</a>
<a class="sourceLine" id="cb8-16" title="16">                        <span class="st">&#39;Random Forest&#39;</span>))</a>
<a class="sourceLine" id="cb8-17" title="17"></a>
<a class="sourceLine" id="cb8-18" title="18">density_plots &lt;-<span class="st"> </span><span class="kw">annotate_figure</span>(density_plots, </a>
<a class="sourceLine" id="cb8-19" title="19">                            <span class="dt">top =</span> <span class="kw">text_grob</span>(<span class="st">&quot;Density of All Models&quot;</span>, </a>
<a class="sourceLine" id="cb8-20" title="20">                                            <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>, </a>
<a class="sourceLine" id="cb8-21" title="21">                                            <span class="dt">size =</span> <span class="dv">14</span>))</a>
<a class="sourceLine" id="cb8-22" title="22"></a>
<a class="sourceLine" id="cb8-23" title="23">density_plots</a></code></pre></div>
<p><img src="08_conclusion_files/figure-html/density_plots-1.png" width="100%" /></p>
</div>
<div id="ks-plots" class="section level3">
<h3><span class="header-section-number">2.3.3</span> KS Plots</h3>
<p>Here we look at the acumulated probability distribution curves delivered by each model. From this plot we can derivate a key measure KS (Kolmogorov–Smirnov).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">KS_plots &lt;-<span class="st"> </span><span class="kw">ggarrange</span>(</a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">KS_Plot</span>(prob.test<span class="op">$</span>logistic.predicted[prob.test<span class="op">$</span>logistic.actual <span class="op">==</span><span class="st"> </span><span class="dv">0</span>],</a>
<a class="sourceLine" id="cb9-3" title="3">          prob.test<span class="op">$</span>logistic.predicted[prob.test<span class="op">$</span>logistic.actual <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb9-4" title="4">          <span class="st">&#39;Logistic Regression&#39;</span>),</a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="kw">KS_Plot</span>(prob.test<span class="op">$</span>decision.tree.predicted[prob.test<span class="op">$</span>decision.tree.actual <span class="op">==</span><span class="st"> </span><span class="dv">0</span>],</a>
<a class="sourceLine" id="cb9-6" title="6">          prob.test<span class="op">$</span>decision.tree.predicted[prob.test<span class="op">$</span>decision.tree.actual <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb9-7" title="7">          <span class="st">&#39;Decision Tree&#39;</span>),</a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="kw">KS_Plot</span>(prob.test<span class="op">$</span>boosting.predicted[prob.test<span class="op">$</span>boosting.actual <span class="op">==</span><span class="st"> </span><span class="dv">0</span>],</a>
<a class="sourceLine" id="cb9-9" title="9">          prob.test<span class="op">$</span>boosting.predicted[prob.test<span class="op">$</span>boosting.actual <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb9-10" title="10">          <span class="st">&#39;Boosting&#39;</span>),</a>
<a class="sourceLine" id="cb9-11" title="11">  <span class="kw">KS_Plot</span>(prob.test<span class="op">$</span>random.forest.predicted[prob.test<span class="op">$</span>random.forest.actual <span class="op">==</span><span class="st"> </span><span class="dv">0</span>],</a>
<a class="sourceLine" id="cb9-12" title="12">          prob.test<span class="op">$</span>random.forest.predicted[prob.test<span class="op">$</span>random.forest.actual <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb9-13" title="13">          <span class="st">&#39;Random Forest&#39;</span>))</a>
<a class="sourceLine" id="cb9-14" title="14"></a>
<a class="sourceLine" id="cb9-15" title="15">KS_plots &lt;-<span class="st"> </span><span class="kw">annotate_figure</span>(KS_plots,</a>
<a class="sourceLine" id="cb9-16" title="16">                            <span class="dt">top =</span> <span class="kw">text_grob</span>(<span class="st">&quot;KS Plots of All Models&quot;</span>,</a>
<a class="sourceLine" id="cb9-17" title="17">                                            <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>,</a>
<a class="sourceLine" id="cb9-18" title="18">                                            <span class="dt">size =</span> <span class="dv">14</span>))</a>
<a class="sourceLine" id="cb9-19" title="19"></a>
<a class="sourceLine" id="cb9-20" title="20">KS_plots</a></code></pre></div>
<p><img src="08_conclusion_files/figure-html/KS_plots-1.png" width="100%" /></p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
